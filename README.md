# MagiaBus_Project
 ToBreakTheCycle
문자 드래그 > Ctr + shift + L (동일한 단어 전부선택) > 변경
편집 찾기및 바꾸기

추후 Character_Main 으로부터 함수호출하는경우 커플링 제거를위해 추후 ICharacter_Main 으로 대체
//2024-10-14

합(fight_Normal,...) 일방공격() 코드 나누어놓기

특정 상황에  > 조건을확인하고 (현 배틀매니저,이펙트매니저 의 상위개체로부터 참조 [사운드설정혹은 설정등으로 사용한 그... 머더라])> 해당조건 검사의 결과에따라 효과발동;

::Character_Group_Create 제작
버프 디버프 요구사항  

	조건부 버프 디버프 (화상 피해를 입을시, 흐트러질시, 공격 사용시 등등)은 각행동을 취할때마다 기록하는 command 스크립트(월드,각캐릭터별)을 만들어서
	해당 기록이 작성될때마다 읽고 그에따라 발동하는 식으로 구상예정

	대상 1 	: 대상2와 동일한 방식으로 지정하거나 발동시 지정 혹은 추가지정(효과를 받을 대상 +여러명이 될수있음),
	상황	: EffectDictionary 의 키값(string) 복수의 상황에서 발생할경우 여러 키값에 액션 넣기(효과가 발동되는 상황),
	조건 	: 이펙트 내에서 받은 대상 2에대한 변수들을 토대로 조건문을 사용(상황을 충족하여 발동될시 통과? 해야하는 조건(예시 "특정디버프"위력이 3 이상일경우 등등))
	대상 2 	: 버프디버프를 얻을떄 버프 생성자 혹은 생성코드에서 지정 (조건을 적용받는 대상 보통 대상 1과 동일 +여러명이 될수있음) ,
	결과 	: 조건 통과 혹은 실패시 발동 복수의 결과 혹은 조건에 따라 여러결과중에서 선택될수있음 (효과 발동으로인하 산출되는 결과)
	+
	UI표시여부 , 위력 횟수 표시여부 , 횟수 0 일시 소멸여부
	위력,횟수 위력,횟수 최대 최소치 (위력증가 취약 등등도 게임내어서는 횟수가 표시되지않더라도 횟수값 존재)

오늘할꺼 (이펙트 사용(배틀매니저에서),속도,속도에따른순서(가능하면 스킬배치까지)) 함수를통한 중계?

 림버스프로젝트
{
할일
{
	
	
	
}
효과(BattleEffect)아이디어
{
	
}
https://arca.live/b/lobotomycoperation/71186923 // 버프디버프 효과정리
https://arca.live/b/lobotomycoperation/84060776 // 죄악공명 공렙증,방렙증 정리
요약 : 공렙방렙 각각 3당 위력1증가 죄악공명 수에따라 공렙방렙 증가(증가량은 위에 글 참고)
BattleEffect // 침잠,화상,합위력증가 등등 버프 디버프 효과
{
	AbstractClass와 Virtual method 를 사용해서 Override를 통해 변경해 적용 
	UnityEvent.EventTrigger 혹은 한곳에 모아서 실행
}

TriggerKey
{
	ClashCoin{int}_Check , ClashCoin{int}_{bool} , ClashCoin_Check , Clash_Same
}
주소지 코드를 받아서 값을수정(ref 를이용하면됨!!!!!)

조건확인및 효과부여

Attack코인 구조체를 받아서 조건을 충족하는지 확인
Attack코인 구조체를 받음,bool값을 반환 혹은 Unityevent를 받아서 실행 , 인스펙터창에서 조작가능

합시작 >Always 효과 적용(일방공격일시 바로 Step2로 합판정값 없음)>!#!사용시 효과 적용>!#!공격시작시 효과 적용> !#!합시작 효과 적용 (둘다 회피,방어,반격이 아닌경우)
 
Step1(코인0개시 바로 Step2,둘다 0 개시 둘다 합판정값 패배) > (속도가더빠른공격 A ,느린공격 B (속도 동일시 플레이어 우선)){A 코인남아있을시 앞뒷면계산
(!#!합코인효과),B코인남아있을시 앞뒷면계산(!#!합코인효과)}
 > !#!합판정? 효과적용(회피시 합위력증가 적용됨..?) >!#!합판정>결과에따라 코인파괴혹은 유지(둘다 회피,방어,반격이 아닌경우) >파괴된코인 !#!코인파괴 효과 적용 >코인갯수 확인 어느한쪽이 0개인가?= 다시Step1으로 : 합승리 패배 효과 적용(둘다합패배시 합패배효과만 받고 끝) 하고 Step2로
 
Step2  > 합승리 혹은 일방공격 하는 대상이 공격 > !#!각각의 코인효과 적용 > !#!공격종료시 효과 적용 

!#!(발동구간) UnityEvent를 통해 적용 name?.Invoke();

UnityEvent<InterfaceName> nameA 조건검사후

코인판정,버프디버프 효과
합승리시 합패배시 코인앞면시 코인뒷면시, 자신혹은적 특정버프디버프 일정량 이상일 경우


버프 디버프 Unity Event 혹은 구조체를 이용하여  합진행시 (매 코인마다) 적용되는 버프디버프 배열에 저장 및 적용
적용되는 시점에 따라 나눠서 저장
매코인마다, 매 합 시작시, 매 합 마지막 계산시 
struct
{
	UnityEvent
}


}
Add

